ansible-playbook [core 2.13.13]
  config file = /home/dadmin/github/legbansible/ansible/ansible.cfg
  configured module search path = ['/home/dadmin/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /home/dadmin/.local/lib/python3.8/site-packages/ansible
  ansible collection location = /home/dadmin/.ansible/collections:/usr/share/ansible/collections
  executable location = /home/dadmin/.local/bin/ansible-playbook
  python version = 3.8.10 (default, Nov  7 2024, 13:10:47) [GCC 9.4.0]
  jinja version = 3.1.4
  libyaml = True
Using /home/dadmin/github/legbansible/ansible/ansible.cfg as config file
setting up inventory plugins
host_list declined parsing /home/dadmin/github/legbansible/ansible/hosts as it did not pass its verify_file() method
script declined parsing /home/dadmin/github/legbansible/ansible/hosts as it did not pass its verify_file() method
auto declined parsing /home/dadmin/github/legbansible/ansible/hosts as it did not pass its verify_file() method
Parsed /home/dadmin/github/legbansible/ansible/hosts inventory source with ini plugin
Loading collection cisco.ios from /home/dadmin/.ansible/collections/ansible_collections/cisco/ios
[WARNING]: Collection cisco.ios does not support Ansible version 2.13.13
Loading collection junipernetworks.junos from /home/dadmin/.ansible/collections/ansible_collections/junipernetworks/junos
[WARNING]: Collection junipernetworks.junos does not support Ansible version
2.13.13
Loading callback plugin default of type stdout, v2.0 from /home/dadmin/.local/lib/python3.8/site-packages/ansible/plugins/callback/default.py
Attempting to use 'default' callback.
Skipping callback 'default', as we already have a stdout callback.
Attempting to use 'junit' callback.
Attempting to use 'minimal' callback.
Skipping callback 'minimal', as we already have a stdout callback.
Attempting to use 'oneline' callback.
Skipping callback 'oneline', as we already have a stdout callback.
Attempting to use 'tree' callback.

PLAYBOOK: handler-example.yml **************************************************
Positional arguments: handler-example.yml
verbosity: 5
connection: smart
timeout: 120
become_method: sudo
tags: ('all',)
inventory: ('/home/dadmin/github/legbansible/ansible/hosts',)
forks: 5
1 plays in handler-example.yml

PLAY [Register Playbook] *******************************************************
META: ran handlers

TASK [debug ntp variable] ******************************************************
task path: /home/dadmin/github/legbansible/ansible/handler-example.yml:7
redirecting (type: connection) ansible.builtin.network_cli to ansible.netcommon.network_cli
Loading collection ansible.netcommon from /home/dadmin/.ansible/collections/ansible_collections/ansible/netcommon
[WARNING]: Collection ansible.netcommon does not support Ansible version
2.13.13
redirecting (type: connection) ansible.builtin.network_cli to ansible.netcommon.network_cli
Loading collection ansible.netcommon from /home/dadmin/.ansible/collections/ansible_collections/ansible/netcommon
[WARNING]: Collection ansible.netcommon does not support Ansible version
2.13.13
redirecting (type: connection) ansible.builtin.network_cli to ansible.netcommon.network_cli
Loading collection ansible.netcommon from /home/dadmin/.ansible/collections/ansible_collections/ansible/netcommon
[WARNING]: Collection ansible.netcommon does not support Ansible version
2.13.13
Loading collection ansible.utils from /home/dadmin/.ansible/collections/ansible_collections/ansible/utils
[WARNING]: Collection ansible.utils does not support Ansible version 2.13.13
Loading collection ansible.utils from /home/dadmin/.ansible/collections/ansible_collections/ansible/utils
[WARNING]: Collection ansible.utils does not support Ansible version 2.13.13
Loading collection ansible.utils from /home/dadmin/.ansible/collections/ansible_collections/ansible/utils
[WARNING]: Collection ansible.utils does not support Ansible version 2.13.13
redirecting (type: terminal) ansible.builtin.ios to cisco.ios.ios
redirecting (type: cliconf) ansible.builtin.ios to cisco.ios.ios
redirecting (type: terminal) ansible.builtin.junos to junipernetworks.junos.junos
redirecting (type: terminal) ansible.builtin.junos to junipernetworks.junos.junos
redirecting (type: cliconf) ansible.builtin.junos to junipernetworks.junos.junos
redirecting (type: cliconf) ansible.builtin.junos to junipernetworks.junos.junos
<192.168.69.12> attempting to start connection
<192.168.69.12> using connection plugin ansible.netcommon.network_cli
Found ansible-connection at path /home/dadmin/.local/bin/ansible-connection
<192.168.69.11> attempting to start connection
<192.168.69.11> using connection plugin ansible.netcommon.network_cli
Found ansible-connection at path /home/dadmin/.local/bin/ansible-connection
<192.168.69.13> attempting to start connection
<192.168.69.13> using connection plugin ansible.netcommon.network_cli
Found ansible-connection at path /home/dadmin/.local/bin/ansible-connection
<192.168.69.12> local domain socket does not exist, starting it
<192.168.69.12> control socket path is /home/dadmin/.ansible/pc/2ae0b81788
<192.168.69.12> redirecting (type: connection) ansible.builtin.network_cli to ansible.netcommon.network_cli
<192.168.69.12> Loading collection ansible.netcommon from /home/dadmin/.ansible/collections/ansible_collections/ansible/netcommon
<192.168.69.12> Loading collection ansible.utils from /home/dadmin/.ansible/collections/ansible_collections/ansible/utils
<192.168.69.12> redirecting (type: terminal) ansible.builtin.junos to junipernetworks.junos.junos
<192.168.69.12> Loading collection junipernetworks.junos from /home/dadmin/.ansible/collections/ansible_collections/junipernetworks/junos
<192.168.69.12> redirecting (type: cliconf) ansible.builtin.junos to junipernetworks.junos.junos
<192.168.69.12> local domain socket listeners started successfully
<192.168.69.12> loaded cliconf plugin ansible_collections.junipernetworks.junos.plugins.cliconf.junos from path /home/dadmin/.ansible/collections/ansible_collections/junipernetworks/junos/plugins/cliconf/junos.py for network_os junos
<192.168.69.12> ssh type is set to auto
<192.168.69.12> autodetecting ssh_type
[WARNING]: ansible-pylibssh not installed, falling back to paramiko
<192.168.69.12> ssh type is now set to paramiko
<192.168.69.12> 
<192.168.69.12> local domain socket path is /home/dadmin/.ansible/pc/2ae0b81788
ok: [jswitch02] => {
    "ntp": {
        "servers": [
            "12.12.12.1",
            "12.12.12.2"
        ]
    }
}
<192.168.69.11> local domain socket does not exist, starting it
<192.168.69.11> control socket path is /home/dadmin/.ansible/pc/04818b5169
<192.168.69.11> redirecting (type: connection) ansible.builtin.network_cli to ansible.netcommon.network_cli
<192.168.69.11> Loading collection ansible.netcommon from /home/dadmin/.ansible/collections/ansible_collections/ansible/netcommon
<192.168.69.11> Loading collection ansible.utils from /home/dadmin/.ansible/collections/ansible_collections/ansible/utils
<192.168.69.11> redirecting (type: terminal) ansible.builtin.junos to junipernetworks.junos.junos
<192.168.69.11> Loading collection junipernetworks.junos from /home/dadmin/.ansible/collections/ansible_collections/junipernetworks/junos
<192.168.69.11> redirecting (type: cliconf) ansible.builtin.junos to junipernetworks.junos.junos
<192.168.69.11> local domain socket listeners started successfully
<192.168.69.11> loaded cliconf plugin ansible_collections.junipernetworks.junos.plugins.cliconf.junos from path /home/dadmin/.ansible/collections/ansible_collections/junipernetworks/junos/plugins/cliconf/junos.py for network_os junos
<192.168.69.11> ssh type is set to auto
<192.168.69.11> autodetecting ssh_type
[WARNING]: ansible-pylibssh not installed, falling back to paramiko
<192.168.69.11> ssh type is now set to paramiko
<192.168.69.11> 
<192.168.69.11> local domain socket path is /home/dadmin/.ansible/pc/04818b5169
ok: [jswitch01] => {
    "ntp": {
        "servers": [
            "192.168.1.1",
            "192.168.1.2",
            "192.168.1.3"
        ]
    }
}
<192.168.69.13> local domain socket does not exist, starting it
<192.168.69.13> control socket path is /home/dadmin/.ansible/pc/e1cc6cfc76
<192.168.69.13> redirecting (type: connection) ansible.builtin.network_cli to ansible.netcommon.network_cli
<192.168.69.13> Loading collection ansible.netcommon from /home/dadmin/.ansible/collections/ansible_collections/ansible/netcommon
<192.168.69.13> Loading collection ansible.utils from /home/dadmin/.ansible/collections/ansible_collections/ansible/utils
<192.168.69.13> redirecting (type: terminal) ansible.builtin.ios to cisco.ios.ios
<192.168.69.13> Loading collection cisco.ios from /home/dadmin/.ansible/collections/ansible_collections/cisco/ios
<192.168.69.13> redirecting (type: cliconf) ansible.builtin.ios to cisco.ios.ios
<192.168.69.13> local domain socket listeners started successfully
<192.168.69.13> loaded cliconf plugin ansible_collections.cisco.ios.plugins.cliconf.ios from path /home/dadmin/.ansible/collections/ansible_collections/cisco/ios/plugins/cliconf/ios.py for network_os ios
<192.168.69.13> ssh type is set to auto
<192.168.69.13> autodetecting ssh_type
[WARNING]: ansible-pylibssh not installed, falling back to paramiko
<192.168.69.13> ssh type is now set to paramiko
<192.168.69.13> 
<192.168.69.13> local domain socket path is /home/dadmin/.ansible/pc/e1cc6cfc76
ok: [cswitch01] => {
    "ntp": {
        "servers": [
            "192.168.1.1",
            "192.168.1.2",
            "192.168.1.3"
        ]
    }
}

TASK [Push Config for IOS] *****************************************************
task path: /home/dadmin/github/legbansible/ansible/handler-example.yml:10
redirecting (type: connection) ansible.builtin.network_cli to ansible.netcommon.network_cli
Loading collection ansible.netcommon from /home/dadmin/.ansible/collections/ansible_collections/ansible/netcommon
[WARNING]: Collection ansible.netcommon does not support Ansible version
2.13.13
Loading collection ansible.utils from /home/dadmin/.ansible/collections/ansible_collections/ansible/utils
[WARNING]: Collection ansible.utils does not support Ansible version 2.13.13
redirecting (type: terminal) ansible.builtin.ios to cisco.ios.ios
redirecting (type: cliconf) ansible.builtin.ios to cisco.ios.ios
skipping: [jswitch01] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
<192.168.69.13> attempting to start connection
<192.168.69.13> using connection plugin ansible.netcommon.network_cli
Found ansible-connection at path /home/dadmin/.local/bin/ansible-connection
skipping: [jswitch02] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
<192.168.69.13> found existing local domain socket, using it!
<192.168.69.13> updating play_context for connection
<192.168.69.13> 
<192.168.69.13> local domain socket path is /home/dadmin/.ansible/pc/e1cc6cfc76
<192.168.69.13> Using network group action cisco.ios.ios for cisco.ios.ios_config
<192.168.69.13> ANSIBLE_NETWORK_IMPORT_MODULES: enabled
<192.168.69.13> ANSIBLE_NETWORK_IMPORT_MODULES: found cisco.ios.ios_config  at /home/dadmin/.ansible/collections/ansible_collections/cisco/ios/plugins/modules/ios_config.py
<192.168.69.13> ANSIBLE_NETWORK_IMPORT_MODULES: running cisco.ios.ios_config
<192.168.69.13> ANSIBLE_NETWORK_IMPORT_MODULES: complete
<192.168.69.13> ANSIBLE_NETWORK_IMPORT_MODULES: Result: {'failed': True, 'msg': 'operation requires privilege escalation', 'exception': '  File "/home/dadmin/.ansible/collections/ansible_collections/cisco/ios/plugins/module_utils/network/ios/ios.py", line 90, in get_config\n    out = connection.get_config(flags=flags)\n  File "/home/dadmin/.local/lib/python3.8/site-packages/ansible/module_utils/connection.py", line 200, in __rpc__\n    raise ConnectionError(to_text(msg, errors=\'surrogate_then_replace\'), code=code)\n', 'invocation': {'module_args': {'src': 'ntp server 192.168.1.1\nntp server 192.168.1.2\nntp server 192.168.1.3\n', 'match': 'line', 'replace': 'line', 'multiline_delimiter': '@', 'defaults': False, 'backup': False, 'save_when': 'never', 'lines': None, 'parents': None, 'before': None, 'after': None, 'running_config': None, 'intended_config': None, 'backup_options': None, 'diff_against': None, 'diff_ignore_lines': None}}, '_ansible_parsed': True}
The full traceback is:
  File "/home/dadmin/.ansible/collections/ansible_collections/cisco/ios/plugins/module_utils/network/ios/ios.py", line 90, in get_config
    out = connection.get_config(flags=flags)
  File "/home/dadmin/.local/lib/python3.8/site-packages/ansible/module_utils/connection.py", line 200, in __rpc__
    raise ConnectionError(to_text(msg, errors='surrogate_then_replace'), code=code)
fatal: [cswitch01]: FAILED! => {
    "changed": false,
    "invocation": {
        "module_args": {
            "after": null,
            "backup": false,
            "backup_options": null,
            "before": null,
            "defaults": false,
            "diff_against": null,
            "diff_ignore_lines": null,
            "intended_config": null,
            "lines": null,
            "match": "line",
            "multiline_delimiter": "@",
            "parents": null,
            "replace": "line",
            "running_config": null,
            "save_when": "never",
            "src": "ntp server 192.168.1.1\nntp server 192.168.1.2\nntp server 192.168.1.3\n"
        }
    },
    "msg": "operation requires privilege escalation"
}

TASK [Push Config for Junos] ***************************************************
task path: /home/dadmin/github/legbansible/ansible/handler-example.yml:17
skipping: [jswitch01] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
skipping: [jswitch02] => {
    "changed": false,
    "skip_reason": "Conditional result was False"
}
META: ran handlers
META: ran handlers

PLAY RECAP *********************************************************************
cswitch01                  : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
jswitch01                  : ok=1    changed=0    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
jswitch02                  : ok=1    changed=0    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   

